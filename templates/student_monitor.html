<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학생 모니터링</title>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const studentName = "{{ student_name }}";
            const eventSource = new EventSource(`/get_student_data/${studentName}`);

            eventSource.onmessage = function(event) {
                console.log("Received data:", event.data);  // 디버깅을 위한 콘솔 로그
                const studentData = JSON.parse(event.data);  // JSON 형식으로 데이터 파싱

                // 얼굴 인식 상태 표시
                const statusMessage = studentData.fr ? 
                    '얼굴 인식 성공' : 
                    '얼굴 인식 실패';
                document.getElementById('status').textContent = statusMessage;
            };

            eventSource.onerror = function(event) {
                console.error("SSE Error:", event);  // 오류 로그
            };
        });
    </script>
</head>
<body>
    <h1>{{ student_name }}님의 상태</h1>
    <img src="{{ url_for('video_feed', student_name=student_name) }}" width="720" height="480">
    <p id="status">로딩 중...</p>
</body>
</html>
